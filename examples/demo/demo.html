<!DOCTYPE HTML>
<html>

<head>
    <script src="https://cdn.firebase.com/v0/firebase.js"></script>
    <script src="../../geoFire.js"></script>
    <script src="demo.js"></script>

    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <link href="demo.css" rel="stylesheet">
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyANQ0KPuNhYNPwxfX4NRkJZ25jEWGK35q8&sensor=false"></script>

    <script type="text/javascript">
      var id = randomString(10);
      var geoLink = 'https://'+id+'.firebaseio-demo.com/demo';
      var geoRef = new Firebase(geoLink);
          geo = new geoFire(geoRef);
      var map, radius, car1Marker, car2Marker, car3Marker;  

      function startDemo() {
          document.getElementById('console').innerText = "Let's build an Uber" +
              "clone that uses the geoFire library.\n\n" +
              "The app finds cars around a user and dispatches the closest one.";

          window.setTimeout(geoStart, 4000);
      }

      function initialize() {
          var loc = new google.maps.LatLng(origin["lat"], origin["lon"]);
          var car1Loc = new google.maps.LatLng(car1Pos["lat"], car1Pos["lon"]);
          var car2Loc = new google.maps.LatLng(car2Pos["lat"], car2Pos["lon"]);
          var car3Loc = new google.maps.LatLng(car3Pos["lat"], car3Pos["lon"]);

          var mapOptions = {
              center: loc,
              zoom: 13,
              mapTypeId: google.maps.MapTypeId.ROADMAP
          };

          map = new google.maps.Map(document.getElementById("map-canvas"),
              mapOptions);

          new google.maps.Marker({
              position: loc,
              map: map,
              icon: "user.png",
              title: requester.name,
          });
      
          car1Marker = new google.maps.Marker({
              position: car1Loc,
              map: map,
              icon: "car.png",
              title: car1.id.toString()
          });

          car2Marker = new google.maps.Marker({
              position: car2Loc,
              map: map,
              icon: "car.png",
              title: car2.id.toString()
          });

          car3Marker = new google.maps.Marker({
              position: car3Loc,
              map: map,
              icon: "car.png",        
              title: car3.id.toString()
           });

          startDemo();
      }

      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
</head>

<body>
        <div id="map-canvas"></div>
            <div id="container">
                <div id="title">geoFire Demo</div>
                <div id="console"></div>
                <div id="centerdiv"></div>
                <div id="behindtitle"></div>
                <div id="behind"></div>
            </div>
        </div>
</body>

</html>
